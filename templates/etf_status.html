<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ETF Status</title>
  <link rel="stylesheet" href="/static/css/theme_shared.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--color-bg);
    color: var(--color-text);
    transition: background-color 0.3s, color 0.3s;
    font-size: 15px;
    line-height: 1.6;
    overflow: auto;
    margin: 0;
    min-height: 100%;
  }
  .app-wrapper { max-width: 1600px; margin: 0 auto; padding: 1rem 1.25rem; }
  header {
    background: var(--color-surface);
    border-bottom: 2px solid var(--color-border);
    padding: 0.75rem 1.25rem;
    margin: -1rem -1.25rem 1rem -1.25rem;
  }
  .header-row { display: flex; align-items: center; justify-content: space-between; gap: 1rem; flex-wrap: wrap; }
  h1 { font-size: 1.5rem; font-weight: 700; }
  .live-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.5rem;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 700;
    background: rgba(16, 185, 129, 0.2);
    color: var(--color-success);
    margin-left: 0.5rem;
  }
  .etf-filter {
    padding: 0.4rem 0.75rem;
    border-radius: 8px;
    border: 1px solid var(--color-border);
    background: var(--color-surface);
    color: var(--color-text);
    font-size: 0.875rem;
    min-width: 220px;
  }
  .etf-filter::placeholder { color: var(--color-muted); }
  .btn-rescan {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.875rem;
    background: #FBBF24;
    color: #1E293B;
    border: none;
    cursor: pointer;
  }
  .btn-rescan:hover { background: #F59E0B; }
  .btn-rescan:disabled { opacity: 0.6; cursor: not-allowed; }
  .summary-bar {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    padding: 0.75rem 1rem;
    background: rgba(99, 102, 241, 0.08);
    border: 1px solid var(--color-border);
    border-radius: 10px;
    margin-bottom: 1rem;
    font-size: 0.875rem;
  }
  .tabs { display: flex; gap: 0.25rem; margin-bottom: 1rem; }
  .tab {
    padding: 0.5rem 1rem;
    border-radius: 8px;
    border: 1px solid var(--color-border);
    background: var(--color-surface);
    color: var(--color-text);
    cursor: pointer;
    font-weight: 500;
    font-size: 0.875rem;
  }
  .tab:hover { background: var(--color-hover); }
  .tab.active { background: var(--color-primary); color: white; border-color: var(--color-primary); }
  .etf-table-wrap {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 10px;
    overflow: auto;
  }
  .etf-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
  }
  .etf-table th {
    background: var(--color-bg);
    padding: 0.75rem 1rem;
    text-align: left;
    font-weight: 600;
    font-size: 0.8125rem;
    color: var(--color-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-bottom: 2px solid var(--color-border);
  }
  .etf-table tbody tr { height: 3rem; min-height: 3rem; }
  .etf-table td {
    padding: 0.4rem 0.7rem;
    border-bottom: 1px solid var(--color-border);
    color: var(--color-text);
    vertical-align: middle;
    overflow: hidden;
    line-height: 1.25;
  }
  .cell-clip-2 { display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; overflow: hidden; max-height: 2.5em; line-height: 1.25; }
  .etf-table tbody tr:hover { background: var(--color-hover); }
  .etf-table .sn-btn {
    background: var(--color-primary);
    color: white;
    border: none;
    padding: 0.35rem 0.75rem;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    font-size: 0.8125rem;
  }
  .etf-table .sn-btn:hover { opacity: 0.9; }
  .etf-table .remark-cell { min-width: 180px; }
  .etf-table .remark-input {
    width: 100%;
    padding: 0.35rem 0.5rem;
    border: 1px solid var(--color-border);
    border-radius: 6px;
    background: var(--color-bg);
    color: var(--color-text);
    font-size: 0.8125rem;
  }
  .etf-table .remark-input:focus { outline: none; border-color: var(--color-primary); }
  </style>
</head>
<body>
  <div class="app-wrapper">
    <header>
      <div class="header-row">
        <div style="display: flex; align-items: center; gap: 0.75rem;">
          <h1>ETF Status</h1>
          <span class="live-badge">LIVE</span>
          <a href="/" style="text-decoration: none; color: var(--color-muted); font-size: 0.875rem;">Analytics</a>
          <a href="/debug" style="text-decoration: none; color: var(--color-muted); font-size: 0.875rem;">FA Debug (includes ETF)</a>
        </div>
        <div style="display: flex; align-items: center; gap: 1rem;">
          <input type="text" id="etf-filter" class="etf-filter" placeholder="Filter SN, MAC, IP...">
          <button type="button" id="btn-rescan" class="btn-rescan">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 2v6h-6M3 12a9 9 0 0 1 15-6.7L21 8M3 22v-6h6M21 12a9 9 0 0 1-15 6.7L3 16"/></svg>
            Rescan
          </button>
        </div>
      </div>
    </header>

    <div class="summary-bar">
      <span>Number of DUT: <strong id="dut-count">0</strong></span>
      <span>Last Updated: <span id="last-updated">-</span> (Next update: <span id="next-update">-</span>)</span>
    </div>

    <div class="tabs">
      <button type="button" class="tab active" data-room="etf">ETF</button>
      <button type="button" class="tab" data-room="room6">Room 6</button>
      <button type="button" class="tab" data-room="room7">Room 7</button>
      <button type="button" class="tab" data-room="room8">Room 8</button>
    </div>

    <div class="etf-table-wrap">
      <table class="etf-table">
        <thead>
          <tr>
            <th>SN</th>
            <th>PN</th>
            <th>BMC MAC</th>
            <th>BMC IP</th>
            <th>SYS IP</th>
            <th>SYS MAC</th>
            <th>Room</th>
            <th>Remark</th>
          </tr>
        </thead>
        <tbody id="etf-tbody">
          <tr><td colspan="8" style="color: var(--color-muted); text-align: center; padding: 2rem;">Loading...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
  <script src="/static/js/etf_status.js" defer></script>
</body>
</html>
